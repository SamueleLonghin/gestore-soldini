{% macro widget_set_date(row) %}
{% if row.data %}
{{ row.data | date_display }}
<div class="collapse mt-2 collapse-modifica-{{ row.id }}">
    <input type="date" class="form-control form-control-sm" name="data" id="data-{{ row.id }}"
        value="{{ row.data | date_form }}" required>
</div>
{% else %}
<span class="text-muted" role="button" data-bs-toggle="collapse" data-bs-target="#collapse-data-{{ row.id }}"
    aria-expanded="false" aria-controls="collapse-data-{{ row.id }}">
    Inserisci data
    <!-- <i class="bi bi-calendar-plus"></i> -->
</span>
<div class="collapse mt-2" id="collapse-data-{{ row.id }}">
    <form class="d-flex align-items-center gap-2" method="post"
        action="{{ url_for('gestione.ingressi.salva_data', id=gestione_id) }}">
        <input type="hidden" name="row_id" value="{{ row.id }}">
        <input type="date" class="form-control form-control-sm" name="data" id="data-{{ row.id }}" value="{{ oggi }}"
            required>
        <button class="btn btn-primary btn-sm"
            formaction="{{ url_for('gestione.ingressi.salva_data', id=gestione_id) }}" type="submit">Salva</button>
    </form>
</div>
{% endif %}

{% endmacro %}